:ruby
  print %Q[
    <script type='text/javascript'> 
      //<![CDATA[
        $(document).ready(function() {
          $('#upload-picture').uploadify({
            uploader:       '/flash/uploadify.swf',
            script:         '/cleaners/#{@cleaner.id}/snap',
            cancelImg:      '/images/cancel.png',
            auto:           true,
            fileExt:        '*.jpg;*.png;*.gif;*.tiff;*.bmp;*.jpeg',
            fileDesc:       'fileDesc text',
            sizeLimit:      10000000,
            onComplete:     function(event, queueId, fileObj, response, data) {
                              window.location.reload();
                              return true;
                            },
            fileDataName:   'photo[file]',
            scriptData:     {'#{session_key_name}': '#{u cookies[session_key_name]}',
                              'authenticity_token': encodeURIComponent('#{u form_authenticity_token if protect_against_forgery?}')
                            }
          });          
        });
      //]]>
    </script>
  ]
